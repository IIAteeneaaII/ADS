<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <%- include('partials/allStyles') %>
  <title>Actualizar Perfil</title>
</head>
<body>
  <div class="container py-4">
    <!-- Título principal -->
    <div class="top-bar mb-3"> 
      <a href="/inicio" class="back-arrow">
          <i class="fas fa-chevron-left"></i>
      </a>
      <h1 class="fw-bold">Mi perfil</h1>
    </div>
    <div class="separator my-2"></div>

    <!-- Sección del perfil -->
    <div class="mb-3 text-center">
      <div class="perfil-foto-container position-relative d-inline-block">
        <img id="imagenPerfil" src="<%= user.profilePic || '/img/fotoPerfil.png' %>" 
          alt="Foto de perfil" class="perfil-foto">

          <button id="btnEditar" class="icono-editar-perfil" aria-label="Editar perfil">
            <i class="fas fa-pen"></i>
          </button>  
        <label for="fotoInput" class="icono-camara d-none">
          <i class="fas fa-camera fa-sm"></i>
        </label>
        <input type="file" id="fotoInput" name="profilePic" accept="image/*" class="d-none">
      </div>
    </div>

    <div class="mb-3 perfil ms-3">
      <h4 class="text-center mb-4">Datos
        <%- include('partials/helpButton', { mensaje: 'Presiona el ícono de <strong>lápiz</strong> en la esquina inferior derecha de la foto de perfil para poder:' + '<ul>' + 
          '<li>Editar tu foto de perfil</li>' + 
          '<li>Cambiar tu nombre de usuario</li>'+
          '</ul>', tipo: 'info'}) %>
      </h4>
      <!-- Nombre del usuario -->
      <label for="nombreUsuario">Tu nombre:</label>
      <div class="position-relative d-flex flex-column">
        <span id="nombreUsuario" class="nombreColor"><%= user.userName %></span>
        <input type="text" id="inputNombreUsuario" class="form-control d-none mb-2" style="width: auto;">
        <small id="nombreError" class="text-danger d-none">El nombre no puede estar vacío</small>
        <!-- Correo del usuario (solo visualización) -->
        <label for="correoUsuario" class="mt-3">Tu correo:</label>
        <div>
          <span id="correoUsuario" class="nombreColor"><%= user.email %></span>
        </div>
    
        <div class="d-flex justify-content-center botones-actualizar">
          <!-- <button id="btnEditar" class="btn btn-sm btn-primary"><i class="fa-regular fa-pen-to-square"></i> Editar perfil</button> -->
          <button id="btnGuardar" class="btn btn-sm btn-primary d-none">Guardar cambios</button>
          <button id="btnCancelar" class="btn btn-sm btn-secondary d-none ms-2">Cancelar</button>
        </div>
      </div>
    </div>
  </div>

  <%- include('partials/modalInfo') %>
  <script src="/js/modal.js"></script>
  <script src="/js/actualizarPerfil.js"></script>
  <script src="/bootstrap-5.0.2/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>

